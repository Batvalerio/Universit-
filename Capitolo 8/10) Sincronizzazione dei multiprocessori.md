- ==**Primitive di sincronizzazione**:== Su un multiprocessore, tutte le CPU devono usare e rispettare un protocollo mutex appropriato per garantire che la mutua esclusione funzioni.
- ==**Istruzione TSL (Test and Set Lock)**:== Il cuore di ogni protocollo mutex consiste in un’istruzione che permette di leggere e scrivere una parola di memoria in una sola operazione indivisibile. TSL legge una parola di memoria e la memorizza in un registro; nello stesso tempo, scrive un 1 (o un valore diverso da 0), nella parola di memoria.
- ==**Problemi di esecuzione contemporanea**:==Se due o più CPU stanno eseguendo codice del sistema operativo in contemporanea, avverrà un disastro. Per ovviare a questo problema, l’istruzione TSL deve prima bloccare il bus, in modo da evitare che altre CPU accedano ad esso, poi effettua entrambi gli accessi alla memoria, e sblocca il bus.
- ==**Spin lock e trashing della cache**:== Questo metodo di mutua esclusione utilizza uno spin lock, perché la CPU richiedente si impegna in un loop stretto per testare il lock più rapidamente possibile, il che non solo spreca il tempo della CPU richiedente, ma anche pone un carico massiccio sul bus o sulla memoria, e rallenta tutte le altre CPU che cercano di svolgere il loro lavoro.
- ==**Algoritmo Ethernet di backoff esponenziale binario**:== Un altro modo per ridurre il traffico del bus consiste nell’utilizzo dell’algoritmo Ethernet di backoff esponenziale binario. Invece di un polling continuo, si può inserire un loop di ritardo fra i cicli di poll.
- ==**Variabile di lock per ciascuna CPU**:== Un’idea ancora migliore consiste nel dare a ciascuna CPU che voglia acquisire il mutex la sua propria variabile di lock da testare. L’algoritmo funziona facendo in modo che una CPU che fallisca ad acquisire il lock allochi una variabile di lock e includa se stessa in coda ad una lista di CPU che attendono il lock.
- ==**Liberazione del lock**:== Quando la CPU che detiene il lock esce dalla regione critica, libera il lock privato che la prima CPU della lista sta testando (nella propria cache).
- ==**Entrata nella regione critica**:== Questa CPU entra allora nella regione critica, e, quando ha finito, libera il lock del suo successore e così via.
- ==**Complessità del protocollo**:== Benché il protocollo sia abbastanza complicato (per evitare che due CPU si accodino simultaneamente alla lista), è efficiente ed immune da starvation. Per maggiori dettagli, si consiglia di consultare il relativo articolo.